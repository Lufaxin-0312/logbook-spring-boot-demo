<!--by 尤淇-->
项目简介
Logbook Spring Boot Demo 是一个采用 Java 语言和 Spring Boot 框架精心打造的实用型开源演示项目，专注于展示如何巧妙地通过 Logbook 组件实现 HTTP 请求与响应日志的高效记录与全面监控。

在当今数字化时代，随着软件系统架构日益复杂，尤其是在微服务架构盛行的背景下，对 HTTP 通信日志的有效记录和监控变得愈发重要。Logbook Spring Boot Demo 项目应运而生，它犹如一把精准的手术刀，帮助开发者在纷繁复杂的系统交互中，清晰地洞察 HTTP 请求和响应的每一个细节。

项目目标
项目的主要目标是成为开发者集成日志功能的得力助手，通过提供简单、高效且灵活的日志记录解决方案，显著提高服务的可观测性和调试能力。

​​可观测性提升​​：通过详细的日志记录，开发者能够实时掌握系统的运行状态，及时发现潜在的性能瓶颈和异常情况，从而做出精准的优化和调整。
​​调试能力增强​​：当系统出现故障或错误时，日志记录就像一座明亮的灯塔，引导开发者快速定位问题根源，大大缩短排查时间，提高开发效率。
二、项目亮点
快速集成
Logbook Spring Boot Demo 项目的一大显著优势在于其便捷的集成方式。开发者只需进行简单配置，即可轻松将日志功能嵌入现有的 Spring Boot 项目中。

在传统的软件开发过程中，集成新的功能往往需要耗费大量的时间和精力，甚至可能需要对现有代码进行大规模的修改和调整。然而，Logbook 凭借其简洁的 API 和良好的兼容性，使得这一过程变得异常简单。

灵活扩展
项目支持多种日志格式化和过滤方式，能够根据不同的业务需求进行个性化定制。

​​日志格式化​​：开发者可以根据自身需求，选择适合的日志格式，如 JSON、XML、纯文本等。JSON 格式的日志具有良好的可读性和便于解析的特点，方便后续的数据处理和分析；而 XML 格式的日志则在某些特定的系统中具有更广泛的应用。
​​日志过滤​​：通过配置敏感信息过滤规则，项目能够自动对请求和响应中的敏感信息（如密码、Token 等）进行脱敏处理，保护用户隐私和数据安全。同时，开发者还可以根据业务逻辑，对特定类型的请求和响应进行筛选，减少不必要的日志信息，提高日志的可读性和管理效率。
提升效率
Logbook Spring Boot Demo 项目能够自动记录 HTTP 通信数据，极大地帮助开发者快速定位问题。

在当今复杂的分布式系统中，问题的排查往往需要耗费大量的时间和精力。传统的通过人工记录和排查的方式效率低下，容易出错。而 Logbook 能够自动收集和记录 HTTP 通信数据，包括请求的 URL、请求方法、请求参数、请求头、响应状态码、响应时间等信息。这些丰富的日志信息为开发者提供了全方位的视角，能够帮助他们快速定位问题的根源，提高问题解决的效率。

模块化设计
项目的代码结构清晰，采用了模块化设计理念，便于维护和添加新功能。

模块化设计使得项目的各个功能模块相对独立，降低了模块之间的耦合度。当需要对某个功能进行修改或扩展时，只需要关注相关的模块，而不会对其他模块产生影响。同时，模块化的设计也使得项目的代码结构更加清晰，易于理解和维护，方便团队成员之间的协作开发。

三、适用场景
微服务架构中记录 API 调用日志
在微服务架构中，各个服务之间通过 HTTP 协议进行通信。Logbook Spring Boot Demo 项目可以帮助开发者详细记录 API 调用的日志，包括请求的参数、响应的结果、调用的时间等信息。

通过对 API 调用日志的分析，开发者可以了解各个服务之间的调用关系和调用频率，及时发现潜在的性能问题和异常调用。同时，这些日志还可以作为分布式系统的一个重要的监控手段，帮助管理员及时发现系统中的故障和异常情况，保障系统的稳定运行。

后端服务的调试与错误排查
在开发和维护后端服务的过程中，难免会遇到各种错误和异常情况。Logbook Spring Boot Demo 项目能够自动记录 HTTP 通信数据，为开发者提供了丰富的调试信息。

当系统出现问题时，开发者可以通过查看日志文件，快速定位问题的根源。例如，如果一个请求返回了错误的响应状态码，开发者可以通过查看请求的参数和响应的内容，判断是由于客户端传递的参数错误还是服务端的逻辑错误导致的。这种快速定位问题的能力，大大提高了开发者的调试效率，缩短了问题的解决时间。

数据合规需求下的通信审计
在当今数据安全和隐私保护的背景下，许多行业都对数据的合规性有着严格的要求。Logbook Spring Boot Demo 项目通过对 HTTP 请求和响应的详细记录，能够帮助开发者和企业满足数据合规的需求。



<!-- by 朱淼佳 -->

## 2. 功能特性

本项目提供以下核心功能：

### 2.1 HTTP 请求与响应日志记录
- 基于 Spring AOP，创建一个拦截器，拦截所有的 HTTP 请求和响应。
- 在拦截器中记录请求的路径、方法、参数和响应数据。
- 优点：解耦业务代码和日志逻辑，实现灵活的日志记录。

- 使用 Spring 的 HandlerInterceptor：
- 实现 HandlerInterceptor 接口，在 preHandle 和 postHandle 方法中记录请求和响应。
- 优点：提供了更直接的方式来拦截和处理 HTTP 请求。

- 使用第三方库（如 Logbook）：
- 直接集成 Logbook，它能够自动记录 HTTP 请求和响应数据。
- 配置简单，支持多种扩展。

### 2.2 支持多种日志格式
- 基于日志框架（如 Logback 或 Log4j）配置格式：
- 通过 Logback 的配置文件（logback.xml）或 Log4j 的 YAML/JSON 配置文件，定义不同格式的日志输出模板。
- 优点：简单易用，支持多种输出格式。

- 使用日志适配器/转换器：
- 实现一个日志适配器，将日志内容转换为不同格式（如 JSON、XML 或自定义格式）。
- 优点：灵活性高，可根据需求定制输出。

- 多格式日志输出器：
- 创建一个自定义的日志输出器，根据配置动态选择日志格式（如 JSON、纯文本等）。
- 优点：支持在同一系统中同时输出不同格式的日志。

## 2.3 灵活的日志过滤
- 基于正则表达式的过滤：
- 使用正则表达式匹配 URL、请求参数或响应内容，动态过滤日志。
- 优点：更精确的过滤规则，适合复杂场景。
- 动态规则引擎：

- 集成规则引擎（如 Drools 或 EasyRules），支持以规则文件或动态加载的方式定义过滤条件。
- 优点：支持更复杂的逻辑和条件组合。

- 分布式过滤规则：
- 在分布式系统中，集中管理日志过滤规则，并同步到各服务实例。
- 优点：统一规则，便于维护。

##  2.4 配置动态调整
- 配置中心支持：
- 集成配置中心（如 Spring Cloud Config、Apollo 或 Nacos），动态加载日志相关配置。
- 优点：集中化管理，支持实时更新。

- 基于数据库的配置更新：
- 将日志配置存储在数据库中，通过管理界面实时修改和生效。
- 优点：易于操作，适合运维团队使用。

- 热点更新机制：
- 利用 Spring Boot 的 @ConfigurationProperties 和热加载机制，监听配置文件的变化并实时生效。
- 优点：实现简单，适合小型项目。

##  2.5 性能优化
- 日志批量写入：
- 将日志数据暂存到内存队列中，定期批量写入磁盘或外部存储。
- 优点：减少 I/O 操作，提高写入效率。

- 日志压缩存储：
- 在写入日志文件时，使用 GZIP 等压缩算法对数据进行压缩。
- 优点：节省存储空间，适合大规模日志数据。

##  2.6 扩展性强
- 支持多种存储目标：
- 提供接口支持，将日志写入文件、数据库、消息队列（如 Kafka、RabbitMQ）或云存储。
- 优点：适应不同的存储需求。

- 基于消息中间件的日志流转：
- 将日志数据作为消息发送到中间件（如 Kafka），再由独立服务处理日志存储或分析。

- 优点：支持高并发日志处理。


<!-- by 唐文广 -->
## 4. 快速开始
温馨提示：你需要完成环境的配置才能部署本项目，本项目要求JDK最低1.8及以上，安装了Gradle 3.3及以上版本。
按照以下步骤，您可以快速启动本项目：

### 4.1 克隆代码
首先，克隆项目代码到本地：
```bash
git clone https://github.com/anyEkko/logbook-spring-boot-demo.git
```
![alt text](img/image.png)

### 4.2 构建项目
使用 gradle 进行构建：
```bash
gradlew build
```
构建成功结果如下
![alt text](img/gradlewbuild.png)
 
### 4.3 启动服务
运行以下命令启动 Spring Boot 服务：
```bash
gradlew bootRun
```
启动成功后如下：
![alt text](img/gradlewbootRun.png)

### 4.4 访问服务
项目启动后，默认监听 `http://localhost:8080`，您可以通过浏览器或工具（如 Postman）访问测试。  
我们可以访问 `http://localhost:8080/echo/` + 任意你想测试的用例。  
例如：我们访问 `http://localhost:8080/echo/helloworld`。  
我们可以先在网页上看到helloworld字样。  
![alt text](img/helloworld2.png)  
我们在后台也可以清楚看到样例的信息： 
![alt text](img/helloworld.png)
---
=======
- 优点：支持高并发日志处理。

